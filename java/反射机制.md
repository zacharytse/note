[TOC]
# 反射作用

在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象都能够调用它的任意一个方法；这种动态获取的信息以及动态调用对象的方法的功能称为java的反射机制。

## invoke方法

**作用1 执行某对象的方法**

```java
public Object invokeMethod(Object owner, String methodName, Object[] args) throws Exception {
     Class ownerClass = owner.getClass();//获取要调用方法的对象的class
 
     Class[] argsClass = new Class[args.length];//获取要调用方法的参数的class
 
     for (int i = 0, j = args.length; i < j; i++) {
         argsClass[i] = args[i].getClass();
     }
 
     Method method = ownerClass.getMethod(methodName,argsClass);//获取到该方法
 
     return method.invoke(owner, args);//调用这个方法，owner是对应的实例
}
```

**作用2执行某个类的静态方法**

```java
public Object invokeStaticMethod(String className, String methodName,
             Object[] args) throws Exception {
 
     Class ownerClass = Class.forName(className);//获取要调用的静态函数的class
     Class[] argsClass = new Class[args.length];//获取参数
     for (int i = 0, j = args.length; i < j; i++) {
         argsClass[i] = args[i].getClass();
     }
 
    Method method = ownerClass.getMethod(methodName,argsClass);//获取调用的方法
 
     return method.invoke(null, args);//不需要通过实例运行，所以是null
 }
```

**作用3新建实例**

```java
public Object newInstance(String className, Object[] args) throws Exception {
     Class newoneClass = Class.forName(className);
 
     Class[] argsClass = new Class[args.length];
 
     for (int i = 0, j = args.length; i < j; i++) {
         argsClass[i] = args[i].getClass();
     }
 
     Constructor cons = newoneClass.getConstructor(argsClass);//获取构造器
 
     return cons.newInstance(args);
 
}
```
