[TOC]
# 题目
给定一个数组，它的第 i 个元素是一支给定股票第 i 天的价格。

设计一个算法来计算你所能获取的最大利润。你可以尽可能地完成更多的交易（多次买卖一支股票）。

注意：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。

# 思路
## 方法一
贪心，如果现在的价格比前一天的价格高，就卖出
由于股票的购买没有限制，所以整个问题等价于寻找x个**不相交**的区间$(l_i,r_i]$,使得如下等式最大化
$$
    \sum_{i=1}^x a[r_i] - a[l_i]
$$
其中$l_i$表示在第$l_i$天买入，$r_i$表示在第$r_i$天卖出。
从数学上来说$a[r_i]-a[l_i]$等价于
$$
(a[r_i] - a[r_i-1]) + (a[r_i-1] -a[r_i-1]) +...+(a[l_i+1] - a[l_i])
$$
因此最后问题可以简化为找x个长度为1的区间$(l_i,l_i+1]$,使得$\sum_{i=1}^xa[l_i+1]-a[l_i]$最大
从贪心角度来考虑，只要使得每次选择的区间最后的差值大于0，那么就可以使得答案最大化
所以最后答案为
$$
ans=\sum_{i=1}^{n-1}max\{0,a[i]-a[i-1]\}
$$
```java{.line-numbers}
class Solution {
    public int maxProfit(int[] prices) {
        int ans = 0;
        for(int i = 1; i < prices.length; ++i){
            if(prices[i] > prices[i - 1]){
                ans += prices[i] - prices[i - 1];
            }
        }
        return ans;
    }
}
```
## 方法二
动态规划，定义$dp[i][0]$是第i天交易完股票不持有股票的最大收益，$dp[i][1]$是第i天交易完股票持有股票的最大收益。对于$dp[i][0]$,可能的转移状态是前一天不持有股票和前一天持有股票。如果前一天不持有股票，那么$dp[i][0] = dp[i-1][0]$,如果持有股票，那么$dp[i][0]=dp[i-1][1]+prices[i]$,所以$dp[i][0]$的转移方程如下
$$
dp[i][0] = max(dp[i-1][0],dp[i-1][1] + prices[i])
$$
同样地，对于$dp[i][1]$也是两种转移状态，即前一天不持有股票和前一天持有股票。所以$dp[i][1]$对应的转移方程如下
$$
dp[i][1] = max(dp[i-1][1],dp[i-1][0] - prices[i])
$$
```java{.line-numbers}
class Solution {
    public int maxProfit(int[] prices) {
        int[][] dp = new int[prices.length][2];
        dp[0][0] = 0;
        dp[0][1] = -prices[0];
        for(int i = 1; i < prices.length; ++i){
            dp[i][0] = Math.max(dp[i - 1][0],dp[i-1][1] + prices[i]);
            dp[i][1] = Math.max(dp[i - 1][1],dp[i - 1][0] - prices[i]);
        }
        return dp[prices.length - 1][0];
    }
}
```
